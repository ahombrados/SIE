<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RUES - Acceso Privado</title>
    <link rel="stylesheet" href="assets/css/styles.css">
    <link rel="stylesheet" href="assets/css/responsive.css">
    <link rel="icon" type="image/png" href="assets/images/logo.png">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@500&display=swap" rel="stylesheet">
    
    <style>
        /* ELIMINAR OJOS NATIVOS */
        input::-ms-reveal, input::-ms-clear { display: none; }
        input::-webkit-contacts-auto-fill-button, 
        input::-webkit-credentials-auto-fill-button { visibility: hidden; pointer-events: none; position: absolute; right: 0; }

        body { background-color: #f4f7f9; margin: 0; color: #334155; }
        .login-wrapper { max-width: 420px; margin: 0 auto; }
        .login-header { text-align: center; margin-bottom: 2rem; }
        
        .login-box {
            background: #ffffff;
            padding: 2.5rem;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.05);
            border: 1px solid #edf2f7;
        }

        .input-field { margin-bottom: 1.5rem; position: relative; }
        .input-field label { display: block; font-size: 0.85rem; font-weight: bold; color: #475569; margin-bottom: 0.5rem; }

        .password-container { position: relative; display: flex; align-items: center; width: 100%; }

        .input-field input {
            width: 100%;
            padding: 0.9rem 1.1rem;
            padding-right: 45px;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            font-size: 1rem;
            transition: all 0.3s;
            outline: none;
            box-sizing: border-box;
        }

        .input-field input:focus { border-color: #0066cc; box-shadow: 0 0 0 3px rgba(0,102,204,0.1); }

        .eye-btn {
            position: absolute;
            right: 12px;
            background: none;
            border: none;
            cursor: pointer;
            color: #94a3b8;
            padding: 5px;
            display: flex;
            align-items: center;
            z-index: 5;
        }

        #login-error {
            color: #dc2626;
            background: #fee2e2;
            font-size: 0.85rem;
            padding: 0.75rem;
            border-radius: 6px;
            margin-bottom: 1.5rem;
            display: none; 
            text-align: center;
            border: 1px solid #fecaca;
        }

        .auth-submit {
            width: 100%;
            background: #003366;
            color: white;
            border: none;
            padding: 1rem;
            border-radius: 6px;
            font-weight: bold;
            cursor: pointer;
            font-size: 1rem;
            transition: background 0.3s;
        }
        .auth-submit:hover { background: #004499; }

        .custom-modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.4); backdrop-filter: blur(5px); z-index: 2000;
            align-items: center; justify-content: center;
        }
        .modal-body { background: white; padding: 2.5rem; border-radius: 12px; max-width: 400px; width: 90%; position: relative; text-align: center; }
        .close-x { position: absolute; top: 1rem; right: 1.2rem; font-size: 1.8rem; cursor: pointer; color: #cbd5e1; }
        .blur { filter: blur(5px); }
    </style>
</head>
<body>

<header>
    <div class="logo-container">
        <img src="assets/images/logo.png" alt="RUES Logo" class="logo">
    </div>
    
    <nav class="navbar">
        <ul>
            <li><a href="index.html">Inicio</a></li>
            <li><a href="about.html">Sobre Nosotros</a></li>
            <li><a href="services.html">Servicios</a></li>
            <li><a href="tracking.html">Seguimiento</a></li>
            <li><a href="clients.html">Clientes</a></li>
            <li><a href="contact.html">Contacto</a></li>
        </ul>
    </nav>
</header>

<main id="main-content" style="padding: 6rem 1.5rem;">
    <div class="login-wrapper">
        <div class="login-header">
            <h1 style="font-family: 'Roboto Slab', serif; color: #003366; margin-bottom: 0.5rem; font-size: 1.8rem;">Acceso Clientes</h1>
            <p style="color: #64748b; font-size: 0.95rem;">Panel de gestión logística avanzado</p>
        </div>

        <div class="login-box">
            <div id="login-error">Usuario o contraseña incorrectos.</div>

            <form id="login-form" autocomplete="off">
                <div class="input-field">
                    <label for="username">Usuario</label>
                    <input type="text" id="username" name="username" placeholder="Nombre de usuario" required>
                </div>

                <div class="input-field">
                    <label for="password">Contraseña</label>
                    <div class="password-container">
                        <input type="password" id="password" name="password" placeholder="••••••••" required>
                        <button type="button" id="togglePassword" class="eye-btn">
                            <svg id="eye-closed" viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path><line x1="1" y1="1" x2="23" y2="23"></line></svg>
                            <svg id="eye-open" viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" style="display:none;"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                        </button>
                    </div>
                </div>

                <button type="submit" class="auth-submit">Entrar</button>

                <div style="text-align: center; margin-top: 1.5rem;">
                    <a href="#" id="openModal" style="color: #64748b; font-size: 0.85rem; text-decoration: none;">¿Olvidaste tu contraseña?</a>
                </div>
            </form>
        </div>
    </div>
</main>

<div id="passwordModal" class="custom-modal">
    <div class="modal-body">
        <span class="close-x" id="closeModal">&times;</span>
        <h2 style="font-family: 'Roboto Slab', serif; font-size: 1.4rem; color: #003366; margin-bottom: 1rem;">Recuperar Contraseña</h2>
        <form id="resetForm">
            <input type="email" id="email" placeholder="email@empresa.com" required 
                   style="width: 100%; padding: 0.9rem; border: 1px solid #e2e8f0; border-radius: 6px; margin-bottom: 1rem; outline: none; box-sizing: border-box;">
            <button type="submit" class="auth-submit">Enviar enlace</button>
        </form>
        <p id="resetMessage" style="margin-top: 1rem; font-size: 0.85rem; color: #059669;"></p>
    </div>
</div>

<div id="footer-placeholder"></div>

<script>
    // 1. Lógica Ver/Ocultar Contraseña
    const togglePassword = document.querySelector('#togglePassword');
    const passwordInput = document.querySelector('#password');
    const eyeOpen = document.querySelector('#eye-open');
    const eyeClosed = document.querySelector('#eye-closed');

    togglePassword.addEventListener('click', () => {
        const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
        passwordInput.setAttribute('type', type);
        eyeOpen.style.display = type === 'text' ? 'block' : 'none';
        eyeClosed.style.display = type === 'text' ? 'none' : 'block';
    });

    // 2. Lógica de Error (Bloqueando el alert del script externo)
    const loginForm = document.getElementById('login-form');
    const loginError = document.getElementById('login-error');

    loginForm.addEventListener('submit', (e) => {
        e.preventDefault();
        e.stopImmediatePropagation(); // IMPORTANTE: Evita que el alert de main.js se dispare
        
        loginError.style.display = 'block';
        passwordInput.value = '';
        return false;
    });

    // 3. Lógica Modal
    const modal = document.getElementById("passwordModal");
    const openBtn = document.getElementById("openModal");
    const closeBtn = document.getElementById("closeModal");
    const mainContent = document.getElementById("main-content");

    openBtn.onclick = (e) => { e.preventDefault(); modal.style.display = "flex"; mainContent.classList.add("blur"); }
    closeBtn.onclick = () => { modal.style.display = "none"; mainContent.classList.remove("blur"); }
    window.onclick = (event) => { if (event.target == modal) { modal.style.display = "none"; mainContent.classList.remove("blur"); } }

    document.getElementById("resetForm").onsubmit = (e) => {
        e.preventDefault();
        e.stopImmediatePropagation(); // También bloqueamos aquí por si acaso
        document.getElementById("resetMessage").innerText = "✓ Si el usuario existe, recibirá un correo en breve.";
        setTimeout(() => { modal.style.display = "none"; mainContent.classList.remove("blur"); }, 2500);
    }
</script>

<script src="assets/js/main.js"></script>

</body>
</html>